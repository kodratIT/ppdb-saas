# Product Requirement Document (PRD)
# PPDB SaaS - Sistem Penerimaan Peserta Didik Baru

**Versi:** 1.0
**Tanggal:** Desember 2025
**Status:** Draft

---

## 1. Executive Summary

### 1.1 Problem Statement

Proses Penerimaan Peserta Didik Baru (PPDB) di Indonesia masih menghadapi berbagai tantangan:

| Masalah | Dampak |
|---------|--------|
| **Proses Manual** | Antrian panjang, waktu tunggu berjam-jam, orang tua harus izin kerja |
| **Data Entry Berulang** | Input data ke multiple sistem, rentan typo dan inkonsistensi |
| **Dokumen Fisik** | Fotokopi berlembar-lembar, risiko hilang/rusak, tidak ramah lingkungan |
| **Transparansi Rendah** | Orang tua tidak tahu status, potensi kecurangan |
| **Beban Administrasi** | Panitia lembur, verifikasi manual satu per satu |
| **Pengumuman Chaos** | Website crash saat pengumuman, informasi tidak merata |

### 1.2 Value Proposition

| Untuk | Value |
|-------|-------|
| **Orang Tua/Siswa** | Daftar dari rumah 24/7, status real-time, notifikasi otomatis |
| **Sekolah** | Hemat waktu 80%, zero paperwork, data akurat, laporan otomatis |
| **Pemerintah** | Data terpusat, audit trail, compliance regulasi |

### 1.3 Unique Selling Points

1. **Multi-Tenant Ready** - Satu platform untuk ribuan sekolah
2. **Regulasi Compliant** - Mendukung semua jalur PPDB sesuai Permendikbud
3. **Mobile-First** - Optimized untuk smartphone (mayoritas user Indonesia)
4. **Offline-Capable** - Bisa simpan draft saat koneksi tidak stabil
5. **Affordable** - Mulai dari Rp 1.5jt/tahun, terjangkau sekolah kecil

PPDB SaaS adalah platform Software-as-a-Service untuk mengelola Penerimaan Peserta Didik Baru secara online. Platform ini mendukung multi-tenant (banyak sekolah dalam satu sistem), berbagai jenjang pendidikan, dan berbagai jalur pendaftaran sesuai regulasi pemerintah.

### Tech Stack

| Layer | Teknologi | Keterangan |
|-------|-----------|------------|
| **Frontend** | SvelteKit + Tailwind CSS | Deploy di Cloudflare Pages |
| **Backend** | Cloudflare Workers | Serverless, edge computing |
| **ORM** | Prisma / Drizzle ORM | Type-safe database access |
| **Database** | PostgreSQL (Neon) | Serverless PostgreSQL |
| **Storage** | Cloudflare R2 | S3-compatible object storage |
| **Payment** | Midtrans/Xendit | Payment gateway Indonesia |

#### Keuntungan Stack Baru
- **Serverless**: Tidak perlu kelola server, auto-scaling
- **Edge Computing**: Response cepat dari lokasi terdekat user
- **Cost Effective**: Pay-per-use, cocok untuk startup
- **Simpler Stack**: Tanpa Redis/Docker, development lebih cepat
- **Neon PostgreSQL**: Serverless Postgres dengan branching untuk dev/staging

---

## 2. Target Pengguna

| Segmen | Deskripsi |
|--------|-----------|
| Jenjang | SD, SMP, SMA, SMK (Semua jenjang) |
| Tipe Sekolah | Negeri dan Swasta |
| Geografis | Indonesia |

---

## 2.1 Arsitektur Tenant & Multi-Unit (Yayasan)

### Konsep Dasar

Platform mendukung **1 Tenant = 1 Yayasan/Institusi** yang dapat memiliki **multiple unit sekolah** dengan jenjang berbeda (SD, SMP, SMA, SMK).

### Struktur Hierarki

```
Tenant (Yayasan/Institusi)
│
├── Informasi Yayasan
│   ├── Nama Yayasan
│   ├── Alamat Kantor Pusat
│   ├── Kontak & Email
│   └── Logo & Branding
│
├── Unit Sekolah 1: SD (NPSN: 12345678)
│   ├── Profil Sekolah
│   ├── Periode PPDB
│   ├── Jalur & Kuota
│   ├── Pendaftar
│   └── Admin Unit
│
├── Unit Sekolah 2: SMP (NPSN: 23456789)
│   ├── Profil Sekolah
│   ├── Periode PPDB
│   ├── Jalur & Kuota
│   ├── Pendaftar
│   └── Admin Unit
│
└── Unit Sekolah 3: SMA (NPSN: 34567890)
    ├── Profil Sekolah
    ├── Periode PPDB
    ├── Jalur & Kuota
    ├── Pendaftar
    └── Admin Unit
```

### Tipe Tenant

| Tipe | Deskripsi | Contoh |
|------|-----------|--------|
| **Single-Unit** | 1 tenant = 1 sekolah | SDN 1 Menteng (hanya SD) |
| **Multi-Unit** | 1 tenant = 1 yayasan dengan multiple jenjang | Yayasan Al-Azhar (SD, SMP, SMA) |
| **Kompleks** | 1 tenant = kompleks pendidikan | Perguruan Cikini (TK, SD, SMP, SMA, SMK) |

### URL Structure untuk Multi-Unit

| Tipe | Format URL | Contoh |
|------|------------|--------|
| **Subdomain + Path** | `{tenant}.ppdb-saas.id/{unit}` | `al-azhar.ppdb-saas.id/sd`, `al-azhar.ppdb-saas.id/smp` |
| **Landing Tenant** | `{tenant}.ppdb-saas.id` | Menampilkan daftar semua unit sekolah |
| **Custom Domain** | `ppdb.{domain}/{unit}` | `ppdb.al-azhar.sch.id/sma` |

### Fitur Khusus Multi-Unit

| Fitur | Deskripsi |
|-------|-----------|
| **Jalur Internal** | Siswa SD Yayasan X mendapat prioritas/jalur khusus untuk daftar ke SMP Yayasan X |
| **Data Kontinuitas** | Data siswa yang sudah terdaftar di SD dapat digunakan untuk pendaftaran SMP (auto-fill) |
| **Cross-Unit Reporting** | Dashboard agregat statistik seluruh unit + breakdown per unit |
| **Shared Branding** | Logo, warna, dan tema konsisten untuk semua unit dalam 1 tenant |
| **Unified Admin** | Admin Yayasan dapat kelola semua unit, Admin Unit hanya akses unit-nya |

### Hierarki User dalam Multi-Unit

| Role | Scope Akses | Kemampuan |
|------|-------------|-----------|
| **Admin Yayasan** | Semua unit dalam tenant | Setup unit baru, kelola admin unit, laporan agregat |
| **Admin Unit** | 1 unit sekolah | Setup PPDB, kelola panitia, laporan unit |
| **Kepala Sekolah** | 1 unit sekolah | Approval, laporan unit |
| **Panitia** | 1 unit sekolah | Verifikasi dokumen |
| **Siswa/Ortu** | Cross-unit | Bisa daftar ke multiple unit dalam 1 tenant |

### Skenario Penggunaan

#### Skenario 1: Siswa Internal (Lulusan SD → SMP)
1. Ahmad lulus dari SD Al-Azhar (sudah ada data di sistem)
2. Ahmad daftar PPDB SMP Al-Azhar
3. Sistem auto-detect: "Ahmad adalah alumni SD Al-Azhar"
4. Data pribadi, data ortu, dokumen (yang masih valid) otomatis terisi
5. Ahmad memilih Jalur Internal (kuota khusus alumni)
6. Proses lebih cepat, dokumen lebih sedikit

#### Skenario 2: Siswa Eksternal
1. Budi dari SD lain ingin daftar ke SMP Al-Azhar
2. Budi akses `al-azhar.ppdb-saas.id/smp`
3. Registrasi akun baru, isi semua data dari awal
4. Memilih jalur reguler (Zonasi/Prestasi/dll)

#### Skenario 3: Daftar Multiple Unit
1. Citra ingin daftar ke SMP dan SMA sekaligus (untuk kakak dan adik)
2. 1 akun ortu bisa mendaftarkan multiple anak ke multiple unit
3. Dashboard ortu menampilkan semua pendaftaran

---

## 3. Competitive Analysis

### 3.1 Landscape Kompetitor

| Kompetitor | Tipe | Kelebihan | Kelemahan | Harga |
|------------|------|-----------|-----------|-------|
| **SIAP PPDB Online** | SaaS | Brand awareness tinggi, fitur lengkap | Mahal, kontrak panjang, tidak fleksibel | Rp 15-50jt/tahun |
| **Jibas PPDB** | Open Source | Gratis, bisa custom | Butuh hosting sendiri, perlu IT support | Gratis + hosting |
| **PPDB Dapodik** | Pemerintah | Gratis, integrasi Dapodik | Fitur terbatas, UI outdated | Gratis |
| **Custom Development** | Project | Sesuai kebutuhan 100% | Mahal (Rp 50-200jt), lama, maintenance sulit | Project-based |
| **Google Forms + Spreadsheet** | DIY | Gratis, familiar | Tidak scalable, manual, tidak profesional | Gratis |

### 3.2 Competitive Positioning

```
                    HARGA TINGGI
                         |
     Custom Dev          |         SIAP PPDB
     (Full feature)      |         (Enterprise)
                         |
FITUR SEDIKIT -----------+----------- FITUR LENGKAP
                         |
     Google Forms        |      ★ PPDB SaaS (Kami)
     Jibas               |        (Sweet spot)
                         |
                    HARGA RENDAH
```

### 3.3 Diferensiasi Kami

| Aspek | Kompetitor | PPDB SaaS |
|-------|------------|-----------|
| **Onboarding** | Butuh training, setup lama | Self-service, 30 menit ready |
| **Pricing** | Fixed/mahal | Pay-per-use, mulai Rp 1.5jt |
| **Kontrak** | Tahunan minimum | Bulanan tersedia |
| **Support** | Jam kerja | 24/7 chat + ticket |
| **Customization** | Rigid template | Flexible form builder |
| **Mobile** | Desktop-first | Mobile-first design |

---

## 4. User Personas

### 4.1 Persona: Bu Sari (Admin TU)

| Atribut | Detail |
|---------|--------|
| **Nama** | Sari Wulandari |
| **Usia** | 45 tahun |
| **Jabatan** | Staff Tata Usaha SMP Negeri |
| **Tech Literacy** | Menengah (WhatsApp, Excel, Word) |
| **Device** | Laptop Windows 10, HP Android |
| **Pain Points** | Lembur saat PPDB, data berantakan, sering salah input, dokumen menumpuk |
| **Goals** | Proses PPDB selesai tepat waktu, data akurat, tidak perlu lembur |
| **Quote** | "Setiap tahun PPDB saya pasti lembur 2 minggu, capek banget" |

### 4.2 Persona: Pak Budi (Kepala Sekolah)

| Atribut | Detail |
|---------|--------|
| **Nama** | Budi Santoso, M.Pd |
| **Usia** | 52 tahun |
| **Jabatan** | Kepala SMA Swasta |
| **Tech Literacy** | Rendah-Menengah (email, WhatsApp) |
| **Device** | Laptop, iPad |
| **Pain Points** | Tidak punya visibility proses PPDB, sulit membuat keputusan, laporan terlambat |
| **Goals** | Dashboard real-time, approval mudah, laporan untuk yayasan |
| **Quote** | "Saya butuh tahu berapa pendaftar hari ini tanpa harus tanya TU" |

### 4.3 Persona: Ibu Ratna (Orang Tua)

| Atribut | Detail |
|---------|--------|
| **Nama** | Ratna Dewi |
| **Usia** | 38 tahun |
| **Pekerjaan** | Karyawan Swasta |
| **Tech Literacy** | Menengah (smartphone aktif, e-commerce, mobile banking) |
| **Device** | HP Android mid-range |
| **Pain Points** | Harus izin kerja untuk antre, tidak tahu status, informasi simpang siur |
| **Goals** | Daftar tanpa harus ke sekolah, tahu status real-time, dapat notifikasi |
| **Quote** | "Tahun lalu saya antre dari jam 5 pagi, sampai kantor telat" |

### 4.4 Persona: Andi (Calon Siswa SMA)

| Atribut | Detail |
|---------|--------|
| **Nama** | Andi Pratama |
| **Usia** | 15 tahun |
| **Status** | Siswa SMP kelas 9 |
| **Tech Literacy** | Tinggi (digital native, gamer, sosmed aktif) |
| **Device** | HP Android, kadang pinjam laptop ortu |
| **Pain Points** | Form ribet, upload dokumen susah, UI jelek |
| **Goals** | Proses cepat, bisa dari HP, UX modern |
| **Quote** | "Kalau website-nya lemot dan ribet, males deh" |

---

## 5. User Roles dan Permissions

### 5.1 Super Admin (Platform Owner)
| Akses | Deskripsi |
|-------|-----------|
| Kelola Tenant | CRUD sekolah/tenant |
| Subscription | Kelola paket dan pembayaran sekolah |
| Analytics | Dashboard seluruh platform |
| Support | Akses ke semua tenant untuk troubleshooting |

### 5.2 Admin Yayasan (Tenant Owner) - Multi-Unit Only
| Akses | Deskripsi |
|-------|-----------|
| Kelola Unit Sekolah | CRUD unit sekolah (SD, SMP, SMA) dalam tenant |
| Kelola Admin Unit | Assign/remove admin untuk setiap unit |
| Laporan Agregat | Dashboard gabungan semua unit (total pendaftar, revenue) |
| Branding Terpusat | Setup logo, warna, tema untuk seluruh unit |
| Konfigurasi Jalur Internal | Setup aturan prioritas alumni antar unit |

> **Catatan:** Role ini hanya berlaku untuk tenant tipe Multi-Unit (Yayasan). Untuk tenant Single-Unit, role ini tidak diperlukan dan Admin Sekolah langsung melapor ke Super Admin.

### 5.3 Admin Sekolah (Admin Unit)
| Akses | Deskripsi |
|-------|-----------|
| Setup PPDB | Konfigurasi periode, jalur, kuota |
| Kelola Panitia | CRUD user panitia |
| Laporan | Statistik dan export data |
| Pengumuman | Publish hasil seleksi |

### 5.4 Kepala Sekolah
| Akses | Deskripsi |
|-------|-----------|
| Dashboard | Overview pendaftaran |
| Approval | Persetujuan hasil seleksi |
| Laporan | Akses semua laporan |

### 5.5 Panitia PPDB
| Akses | Deskripsi |
|-------|-----------|
| Verifikasi | Verifikasi dokumen pendaftar |
| Input Nilai | Input nilai tes (jika ada) |
| Cetak | Cetak kartu peserta dan dokumen |

### 5.6 Orang Tua / Wali
| Akses | Deskripsi |
|-------|-----------|
| Registrasi | Daftar akun orang tua |
| Kelola Anak | Tambah/edit data anak (bisa lebih dari 1) |
| Pendaftaran | Daftarkan anak ke sekolah tujuan |
| Pembayaran | Bayar biaya pendaftaran |
| Status | Cek status semua pendaftaran anak |
| Cetak | Cetak kartu peserta dan bukti |

### 5.7 Calon Siswa (Opsional)
| Akses | Deskripsi |
|-------|-----------|
| Login Mandiri | Siswa SMA/SMK bisa registrasi sendiri |
| Lihat Status | Cek status pendaftaran sendiri |
| Update Data | Edit data pribadi (dengan persetujuan ortu) |

> **Catatan:** Untuk jenjang SD/SMP, akun dipegang oleh Orang Tua. Untuk SMA/SMK, siswa dapat memiliki akun mandiri yang terhubung dengan akun orang tua.

---

## 6. Jalur Pendaftaran

| Jalur | Deskripsi | Kriteria Seleksi |
|-------|-----------|------------------|
| **Zonasi** | Berdasarkan domisili | Jarak rumah ke sekolah |
| **Prestasi Akademik** | Nilai rapor/UN | Ranking nilai |
| **Prestasi Non-Akademik** | Lomba, olahraga, seni | Skor prestasi |
| **Afirmasi** | Keluarga tidak mampu | Verifikasi KIP/PKH |
| **Perpindahan Ortu** | Mutasi tugas orang tua | Dokumen SK mutasi |
| **Anak Guru/Tendik** | Anak pegawai sekolah | Verifikasi kepegawaian |
| **Jalur Khusus** | Custom per sekolah | Konfigurasi sekolah |

### 6.1 Aturan Bisnis Pendaftaran Multi-Jalur

| Aturan | Deskripsi |
|--------|-----------|
| **Single Active Registration** | Siswa hanya boleh memiliki **1 pendaftaran aktif** per sekolah/unit pada satu waktu |
| **Jalur Prioritas** | Jika sekolah mengizinkan pilihan kedua, siswa dapat memilih "Jalur Cadangan" yang diproses jika Jalur Utama gagal |
| **Pembatalan Otomatis** | Jika siswa diterima di Jalur Utama, pendaftaran Jalur Cadangan otomatis dibatalkan |
| **Kuota Protection** | Kuota hanya "dikunci" untuk 1 jalur aktif, mencegah siswa mem-booking banyak kuota |
| **Cross-School** | Siswa boleh mendaftar ke **multiple sekolah berbeda** secara bersamaan |

#### Skenario Implementasi

```
Contoh: Budi ingin daftar ke SMA Negeri 1

1. Budi pilih Jalur Utama: "Prestasi Akademik"
2. Budi pilih Jalur Cadangan: "Zonasi" (opsional, jika sekolah mengaktifkan)
3. Sistem memproses Jalur Prestasi terlebih dahulu
   - Jika LOLOS → Jalur Zonasi otomatis dibatalkan
   - Jika GAGAL → Sistem otomatis memproses Jalur Zonasi
4. Budi tidak bisa mendaftar jalur lain di SMA Negeri 1 sampai proses selesai
```

> **Catatan Konfigurasi:** Admin Sekolah dapat mengaktifkan/menonaktifkan fitur "Jalur Cadangan" di pengaturan periode PPDB.

---

## 7. Fitur Utama

### 7.1 Modul Super Admin (Platform)
- Manajemen Tenant (Sekolah)
- Paket Subscription (Basic/Pro/Enterprise)
- Billing dan Invoice
- Platform Analytics
- System Configuration
- Support Ticketing

### 7.2 Modul Admin Sekolah
- Setup Profil Sekolah
- Konfigurasi Periode PPDB
- Setup Jalur dan Kuota
- Manajemen User (Panitia, Kepsek)
- Konfigurasi Formulir Pendaftaran
- Setting Biaya Pendaftaran
- Laporan dan Statistik
- Pengumuman Hasil
- **Master Data Alumni** (Import/Export data lulusan untuk deteksi Jalur Internal)

### 7.2.1 Fitur Master Data Alumni
| Fitur | Deskripsi |
|-------|-----------|
| Import Data | Upload CSV/Excel data lulusan (NISN, Nama, Tahun Lulus) |
| Sinkronisasi Unit | Tarik data otomatis dari unit SD untuk SMP, SMP untuk SMA (Multi-Unit) |
| Pencarian Manual | Cari siswa berdasarkan NISN/Nama untuk verifikasi manual |
| Auto-Detect | Sistem otomatis mendeteksi pendaftar yang NISN-nya ada di Master Alumni |
| Flag Alumni | Pendaftar alumni ditandai khusus dan bisa memilih Jalur Internal |

> **Catatan:** Fitur ini diperlukan agar "Jalur Internal/Alumni" (Bagian 2.1 Skenario 1) dapat berfungsi. Tanpa data alumni, sistem tidak dapat mendeteksi bahwa pendaftar adalah lulusan dari unit sekolah dalam yayasan yang sama.

### 7.3 Modul Pendaftaran (Calon Siswa)
1. Registrasi Akun
2. Pilih Sekolah dan Jalur
3. Isi Formulir Data Diri
4. Upload Dokumen
5. Pembayaran (jika ada)
6. Cetak Kartu Peserta
7. Tunggu Verifikasi
8. Cek Pengumuman
9. **Daftar Ulang** (jika lolos) - Lihat detail di 7.3.1

### 7.3.1 Fitur Daftar Ulang (Re-Registration)

Daftar Ulang adalah proses konfirmasi ketersediaan siswa yang lolos seleksi untuk menjadi siswa resmi. Fitur ini penting terutama untuk sekolah swasta yang memiliki proses administrasi dan pembayaran uang pangkal.

| Fitur | Deskripsi |
|-------|-----------|
| **Konfirmasi Kehadiran** | Tombol "Saya Bersedia Menjadi Siswa" dengan batas waktu (deadline) |
| **Form Data Tambahan** | Ukuran seragam, pilihan ekstrakurikuler, jalur penjemputan (opsional per sekolah) |
| **Invoice Uang Pangkal** | Generate invoice otomatis untuk biaya masuk (Uang Pangkal, Seragam, Buku) |
| **Pembayaran** | Integrasi payment gateway untuk pembayaran uang pangkal |
| **Upload Dokumen Asli** | Beberapa sekolah memerlukan scan dokumen asli (bukan fotokopi) |
| **Surat Pernyataan** | Generate surat pernyataan orang tua (digital signature/checkbox) |
| **Status Lock** | Setelah daftar ulang selesai, status siswa terkunci dan masuk ke Master Data Siswa |

#### Alur Daftar Ulang

```
1. Siswa dinyatakan LOLOS seleksi
2. Sistem kirim notifikasi "Selamat! Silakan Daftar Ulang sebelum [tanggal]"
3. Siswa login → Klik "Daftar Ulang"
4. Isi form data tambahan (jika ada)
5. Lihat rincian biaya → Bayar (jika sekolah swasta)
6. Upload dokumen tambahan (jika diminta)
7. Centang persetujuan orang tua
8. Submit → Status berubah menjadi "TERDAFTAR"
9. Jika melewati deadline tanpa daftar ulang → Status "HANGUS", kuota dibuka untuk cadangan
```

#### Konfigurasi Admin
| Setting | Opsi |
|---------|------|
| Batas Waktu Daftar Ulang | 3/5/7 hari setelah pengumuman |
| Form Tambahan | Aktif/Nonaktif per field |
| Pembayaran Online | Aktif/Nonaktif |
| Dokumen Tambahan | List dokumen yang diminta |
| Cadangan Otomatis | Jika hangus, panggil cadangan secara otomatis |

### 7.4 Modul Verifikasi (Panitia)
| Fitur | Deskripsi |
|-------|-----------|
| Daftar Pendaftar | List semua pendaftar dengan filter dan search |
| Detail Pendaftar | Lihat data lengkap dan dokumen |
| Verifikasi Dokumen | Approve/Reject dengan catatan |
| Input Nilai Tes | Input nilai jika ada tes tulis |
| Bulk Action | Verifikasi massal |

### 7.5 Modul Seleksi dan Pengumuman
| Fitur | Deskripsi |
|-------|-----------|
| Ranking Otomatis | Sorting berdasarkan kriteria jalur |
| Simulasi Seleksi | Preview hasil sebelum publish |
| Approval Kepsek | Persetujuan kepala sekolah |
| Publish Pengumuman | Rilis hasil ke publik |
| Notifikasi | Email/SMS/WhatsApp ke pendaftar |

### 7.6 Modul Pembayaran
| Fitur | Deskripsi |
|-------|-----------|
| Payment Gateway | Integrasi Midtrans/Xendit |
| Virtual Account | Bank Transfer (BCA, Mandiri, BNI, BRI) |
| E-Wallet | GoPay, OVO, Dana, ShopeePay |
| Invoice | Generate invoice otomatis |
| Reconciliation | Rekonsiliasi pembayaran |

### 7.7 Modul Laporan dan Statistik
| Laporan | Deskripsi |
|---------|-----------|
| Statistik Pendaftar | Per jalur, per hari, per status |
| Demografi | Asal sekolah, domisili, gender |
| Pembayaran | Paid, pending, failed |
| Konversi | Registrasi - Daftar - Lolos |
| Export | PDF, Excel, CSV |

---

## 8. Model Bisnis SaaS

### 8.1 Paket Subscription

| Paket | Harga/Tahun | Kuota Siswa | Fitur |
|-------|-------------|-------------|-------|
| **Starter** | Rp 1.500.000 | 100 pendaftar | Basic features |
| **Basic** | Rp 3.000.000 | 300 pendaftar | + Payment gateway |
| **Pro** | Rp 6.000.000 | 1000 pendaftar | + Multi jalur, Notifikasi |
| **Enterprise** | Custom | Unlimited | + Custom domain, API, Support priority |

### 8.2 Revenue Stream
| Stream | Deskripsi |
|--------|-----------|
| Subscription | Biaya tahunan per sekolah |
| Transaction Fee | Persentase dari biaya pendaftaran (opsional) |
| Add-ons | SMS/WhatsApp notifikasi, Custom domain |
| Setup Fee | Biaya setup awal (opsional) |

---

## 9. Non-Functional Requirements

### 9.1 Performance
- Response time kurang dari 2 detik
- Support 1000 concurrent users per tenant
- 99.9% uptime SLA

### 9.2 Security
- HTTPS everywhere
- JWT Authentication
- Role-based Access Control (RBAC)
- Data encryption at rest
- OWASP compliance

### 9.3 Scalability
- Horizontal scaling
- Database connection pooling
- CDN untuk static assets
- Redis untuk caching dan session

---

## 10. Database Schema (High-Level)

### Platform Level
- **tenants** - id, name, slug, domain, subscription_id, settings, created_at, updated_at
- **subscriptions** - id, tenant_id, plan, status, start_date, end_date, quota_students
- **platform_users** - id, email, password_hash, role, created_at, updated_at

### Tenant Level (per sekolah)
- **school_units** - id, tenant_id, npsn, name, level (SD/SMP/SMA/SMK), address, phone, email
- **users** - id, school_unit_id, email, password_hash, role, created_at, updated_at
- **periods** - id, school_unit_id, name, start_date, end_date, status, settings
- **paths** - id, period_id, name, type, quota, requirements, rules
- **quotas** - id, path_id, total, used, available
- **registrations** - id, period_id, path_id, student_id, parent_id, status, registration_number, created_at, updated_at
- **students** - id, nisn, name, gender, birth_date, birth_place, address, phone, email
- **parents** - id, name, relationship, nik, phone, email, occupation, address
- **documents** - id, registration_id, type, file_url, verification_status, verified_by, verified_at
- **verification_logs** - id, registration_id, verified_by, status, notes, created_at
- **payments** - id, registration_id, amount, status, payment_method, transaction_id, created_at, updated_at
- **selections** - id, period_id, path_id, ranking_id, status, notes
- **announcements** - id, period_id, title, content, published_at, created_by
- **alumni** - id, school_unit_id, nisn, name, graduation_year (untuk deteksi jalur internal)

> **Note:** Lihat TDD untuk detail lengkap ERD dan relationship antar tabel.

### 10.4 Detailed Database Schema

#### Platform Level Tables

**tenants**
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | UUID | PK | Unique tenant ID |
| name | VARCHAR(255) | NOT NULL | Yayasan/Sekolah name |
| slug | VARCHAR(100) | UNIQUE, NOT NULL | URL slug for subdomain |
| domain | VARCHAR(255) | UNIQUE, NULL | Custom domain |
| logo_url | VARCHAR(500) | NULL | Cloud storage URL |
| theme_settings | JSONB | NULL | Colors, fonts, branding |
| status | ENUM | NOT NULL | active, suspended, pending |
| created_at | TIMESTAMP | NOT NULL, DEFAULT NOW() | |
| updated_at | TIMESTAMP | NOT NULL, DEFAULT NOW() | |

**subscriptions**
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | UUID | PK | |
| tenant_id | UUID | FK tenants.id | |
| plan | ENUM | NOT NULL | starter, basic, pro, enterprise |
| status | ENUM | NOT NULL | active, expired, cancelled |
| start_date | DATE | NOT NULL | |
| end_date | DATE | NOT NULL | |
| quota_students | INTEGER | NOT NULL | Max registrations |
| used_students | INTEGER | DEFAULT 0 | Current usage |
| created_at | TIMESTAMP | NOT NULL, DEFAULT NOW() | |

#### Tenant Level Tables

**school_units**
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | UUID | PK | |
| tenant_id | UUID | FK tenants.id | |
| npsn | VARCHAR(10) | UNIQUE, NOT NULL | National school ID |
| name | VARCHAR(255) | NOT NULL | School name |
| level | ENUM | NOT NULL | SD, SMP, SMA, SMK |
| address | TEXT | NOT NULL | |
| province | VARCHAR(100) | NOT NULL | |
| city | VARCHAR(100) | NOT NULL | |
| district | VARCHAR(100) | NOT NULL | |
| postal_code | VARCHAR(10) | NULL | |
| phone | VARCHAR(20) | NULL | |
| email | VARCHAR(255) | NULL | |
| coordinates | POINT | NULL | Lat/long for zonasi |
| created_at | TIMESTAMP | NOT NULL, DEFAULT NOW() | |

**periods**
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | UUID | PK | |
| school_unit_id | UUID | FK school_units.id | |
| name | VARCHAR(100) | NOT NULL | "2025/2026" |
| academic_year | VARCHAR(10) | NOT NULL | "2025-2026" |
| start_date | DATE | NOT NULL | Registration open |
| end_date | DATE | NOT NULL | Registration close |
| announcement_date | DATE | NULL | Result announcement |
| re_registration_deadline | DATE | NULL | Re-reg deadline |
| status | ENUM | NOT NULL | draft, active, closed, archived |
| settings | JSONB | NULL | Config flags |
| created_at | TIMESTAMP | NOT NULL, DEFAULT NOW() | |

**paths** (Jalur Pendaftaran)
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | UUID | PK | |
| period_id | UUID | FK periods.id | |
| name | VARCHAR(100) | NOT NULL | "Zonasi", "Prestasi" |
| type | ENUM | NOT NULL | zonasi, prestasi, afirmasi, mutasi, internal, custom |
| quota | INTEGER | NOT NULL | Total seats |
| used_quota | INTEGER | DEFAULT 0 | Seats taken |
| allow_backup_path | BOOLEAN | DEFAULT false | Allow backup option |
| criteria_config | JSONB | NOT NULL | Scoring rules |
| document_requirements | JSONB | NULL | Required docs |
| is_active | BOOLEAN | DEFAULT true | |
| created_at | TIMESTAMP | NOT NULL, DEFAULT NOW() | |

**registrations**
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | UUID | PK | |
| period_id | UUID | FK periods.id | |
| path_id | UUID | FK paths.id | |
| backup_path_id | UUID | FK paths.id, NULL | Backup path |
| registration_number | VARCHAR(20) | UNIQUE, NOT NULL | Auto-generated |
| student_id | UUID | FK students.id | |
| parent_id | UUID | FK parents.id | |
| status | ENUM | NOT NULL | draft, submitted, verified, processing, accepted, rejected, hangus |
| rejection_reason | TEXT | NULL | |
| score | DECIMAL(5,2) | NULL | Selection score |
| rank | INTEGER | NULL | Final ranking |
| submitted_at | TIMESTAMP | NULL | |
| created_at | TIMESTAMP | NOT NULL, DEFAULT NOW() | |

**students**
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | UUID | PK | |
| nisn | VARCHAR(10) | UNIQUE, NOT NULL | National student ID |
| full_name | VARCHAR(255) | NOT NULL | |
| gender | ENUM | NOT NULL | L, P |
| birth_place | VARCHAR(100) | NOT NULL | |
| birth_date | DATE | NOT NULL | |
| nik | VARCHAR(16) | UNIQUE, NOT NULL | National ID |
| religion | ENUM | NOT NULL | Islam, Kristen, Katolik, Hindu, Buddha, Konghucu, Lainnya |
| address | TEXT | NOT NULL | |
| province | VARCHAR(100) | NOT NULL | |
| city | VARCHAR(100) | NOT NULL | |
| district | VARCHAR(100) | NOT NULL | |
| village | VARCHAR(100) | NULL | |
| postal_code | VARCHAR(10) | NULL | |
| phone | VARCHAR(20) | NULL | |
| email | VARCHAR(255) | NULL | |
| previous_school | VARCHAR(255) | NULL | SD asal |
| previous_school_npsn | VARCHAR(10) | NULL | |
| is_alumni | BOOLEAN | DEFAULT false | Internal candidate |
| photo_url | VARCHAR(500) | NULL | |
| created_at | TIMESTAMP | NOT NULL, DEFAULT NOW() | |

**parents**
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | UUID | PK | |
| father_name | VARCHAR(255) | NOT NULL | |
| father_nik | VARCHAR(16) | UNIQUE, NULL | |
| father_phone | VARCHAR(20) | NULL | |
| father_occupation | VARCHAR(100) | NULL | |
| mother_name | VARCHAR(255) | NOT NULL | |
| mother_nik | VARCHAR(16) | UNIQUE, NULL | |
| mother_phone | VARCHAR(20) | NULL | |
| mother_occupation | VARCHAR(100) | NULL | |
| guardian_name | VARCHAR(255) | NULL | If applicable |
| guardian_nik | VARCHAR(16) | UNIQUE, NULL | |
| guardian_relationship | VARCHAR(50) | NULL | |
| guardian_phone | VARCHAR(20) | NULL | |
| email | VARCHAR(255) | NOT NULL | For notifications |
| phone | VARCHAR(20) | NOT NULL | Primary contact |
| address | TEXT | NULL | If different from student |
| economic_status | ENUM | NULL | Regular, KIP, PKH |
| kip_number | VARCHAR(20) | NULL | |
| created_at | TIMESTAMP | NOT NULL, DEFAULT NOW() | |

**documents**
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | UUID | PK | |
| registration_id | UUID | FK registrations.id | |
| type | ENUM | NOT NULL | kk, akta, rapor, kip, foto, other |
| file_name | VARCHAR(255) | NOT NULL | |
| file_url | VARCHAR(500) | NOT NULL | Cloud storage URL |
| file_size | INTEGER | NOT NULL | In bytes |
| mime_type | VARCHAR(100) | NOT NULL | |
| verification_status | ENUM | NOT NULL | pending, verified, rejected |
| verified_by | UUID | FK users.id, NULL | |
| verified_at | TIMESTAMP | NULL | |
| rejection_notes | TEXT | NULL | |
| created_at | TIMESTAMP | NOT NULL, DEFAULT NOW() | |

**payments**
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | UUID | PK | |
| registration_id | UUID | FK registrations.id | |
| type | ENUM | NOT NULL | registration_fee, re_registration_fee |
| amount | DECIMAL(12,2) | NOT NULL | |
| status | ENUM | NOT NULL | pending, paid, failed, cancelled, expired |
| payment_method | VARCHAR(50) | NULL | va_bca, gopay, etc |
| payment_gateway | ENUM | NOT NULL | midtrans, xendit, manual |
| transaction_id | VARCHAR(100) | NULL | PG transaction ID |
| va_number | VARCHAR(50) | NULL | Virtual account |
| expiry_date | TIMESTAMP | NULL | Payment deadline |
| paid_at | TIMESTAMP | NULL | |
| metadata | JSONB | NULL | PG callback data |
| created_at | TIMESTAMP | NOT NULL, DEFAULT NOW() | |

**alumni**
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| id | UUID | PK | |
| school_unit_id | UUID | FK school_units.id | |
| nisn | VARCHAR(10) | NOT NULL | |
| full_name | VARCHAR(255) | NOT NULL | |
| graduation_year | INTEGER | NOT NULL | |
| created_at | TIMESTAMP | NOT NULL, DEFAULT NOW() | |
| UNIQUE(school_unit_id, nisn) | | | |

---

## 10.1 API Endpoints Design

### Authentication
| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/api/auth/register` | Register parent account |
| POST | `/api/auth/login` | Login with email/password |
| POST | `/api/auth/google` | Google OAuth callback |
| POST | `/api/auth/refresh` | Refresh JWT token |
| POST | `/api/auth/verify-email` | Verify email with token |
| POST | `/api/auth/forgot-password` | Request password reset |
| POST | `/api/auth/reset-password` | Reset password with token |

### Public API
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/api/public/tenants` | List all active schools |
| GET | `/api/public/tenants/:slug` | Get school detail |
| GET | `/api/public/tenants/:slug/periods` | List active PPDB periods |
| GET | `/api/public/announcements/:period_id` | Get announcement results |

### Parent API
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/api/parent/profile` | Get parent profile |
| PUT | `/api/parent/profile` | Update parent profile |
| GET | `/api/parent/children` | List children |
| POST | `/api/parent/children` | Add child |
| PUT | `/api/parent/children/:id` | Update child data |
| POST | `/api/parent/registrations` | Create registration |
| GET | `/api/parent/registrations` | List all registrations |
| GET | `/api/parent/registrations/:id` | Get registration detail |
| POST | `/api/parent/registrations/:id/documents` | Upload document |
| GET | `/api/parent/registrations/:id/payment` | Get payment detail |
| POST | `/api/parent/registrations/:id/re-registration` | Submit re-registration |
| GET | `/api/parent/registrations/:id/status` | Check registration status |

### Admin School API
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/api/school/profile` | Get school profile |
| PUT | `/api/school/profile` | Update school profile |
| GET | `/api/school/periods` | List PPDB periods |
| POST | `/api/school/periods` | Create new period |
| PUT | `/api/school/periods/:id` | Update period |
| DELETE | `/api/school/periods/:id` | Delete period |
| GET | `/api/school/paths` | List admission paths |
| POST | `/api/school/paths` | Create admission path |
| PUT | `/api/school/paths/:id` | Update path |
| DELETE | `/api/school/paths/:id` | Delete path |
| GET | `/api/school/users` | List admin users |
| POST | `/api/school/users` | Create admin user |
| PUT | `/api/school/users/:id` | Update user |
| DELETE | `/api/school/users/:id` | Delete user |
| GET | `/api/school/registrations` | List all registrations |
| GET | `/api/school/registrations/:id` | Get registration detail |
| PUT | `/api/school/registrations/:id/verify` | Verify registration |
| PUT | `/api/school/registrations/:id/reject` | Reject registration |
| GET | `/api/school/alumni` | List alumni data |
| POST | `/api/school/alumni/import` | Import alumni from CSV |
| GET | `/api/school/reports/:type` | Get report (daily, demographic, etc) |

### Selection & Announcement API
| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/api/selection/simulate` | Simulate selection result |
| POST | `/api/selection/run` | Run actual selection |
| GET | `/api/selection/results` | Get selection results |
| POST | `/api/selection/approve` | Approve selection (Kepsek) |
| POST | `/api/selection/publish` | Publish announcement |

### Payment API
| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/api/payment/create` | Create payment invoice |
| GET | `/api/payment/callback` | Payment gateway callback |
| GET | `/api/payment/status/:id` | Check payment status |

### Super Admin API
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/api/admin/tenants` | List all tenants |
| POST | `/api/admin/tenants` | Create tenant |
| PUT | `/api/admin/tenants/:id` | Update tenant |
| DELETE | `/api/admin/tenants/:id` | Delete tenant |
| GET | `/api/admin/tenants/:id/login` | Impersonate tenant login |
| GET | `/api/admin/statistics` | Platform-wide statistics |

---

## 10.2 UI/UX Screen Flow

### Parent Flow
```
1. Landing Page (ppdb-saas.id / tenant-domain)
   └─> Pilih Sekolah / Login

2. Login/Register
   ├─> Email + Password
   ├─> Google OAuth
   └─> OTP (Pro/Enterprise)

3. Dashboard Orang Tua
   ├─> Daftar Anak
   ├─> Pendaftaran Saya
   ├─> Notifikasi
   └─> Profil

4. Pendaftaran Baru
   ├─> Pilih Sekolah dan Unit
   ├─> Pilih Jalur Pendaftaran
   ├─> Isi Data Diri Siswa (auto-fill jika alumni)
   ├─> Isi Data Orang Tua
   ├─> Upload Dokumen
   ├─> Preview
   ├─> Submit & Cetak Bukti
   └─> Redirect ke Pembayaran (jika ada)

5. Detail Pendaftaran
   ├─> Status & Timeline
   ├─> Catatan dari Panitia
   ├─> Dokumen yang diupload
   ├─> Status Pembayaran
   └─> Tombol Daftar Ulang (jika lolos)

6. Daftar Ulang
   ├─> Konfirmasi Ketersediaan
   ├─> Isi Data Tambahan
   ├─> Upload Dokumen Asli
   ├─> Invoice Uang Pangkal
   ├─> Pembayaran
   └─> Submit
```

### Admin Sekolah Flow
```
1. Login Admin
   └─> Dashboard Sekolah

2. Dashboard Overview
   ├─> Statistik Pendaftar (total, per jalur, per status)
   ├─> Grafik Pendaftaran Harian
   ├─> Kuota Terisi
   └─> Quick Actions

3. Manajemen Periode PPDB
   ├─> List Periode
   ├─> Create/Edit Periode
   │   ├─> Tanggal Aktif
   │   ├─> Jalur yang Dibuka
   │   ├─> Kuota Per Jalur
   │   └─> Preview Formulir
   └─> Archive Periode

4. Manajemen Panitia
   ├─> List Users
   ├─> Add User (Admin/Kepsek/Panitia)
   └─> Edit/Delete User

5. Verifikasi Pendaftar
   ├─> List Pendaftar (filterable)
   ├─> Detail Pendaftar
   │   ├─> View Dokumen
   │   ├─> Approve/Reject
   │   └─> Catatan
   └─> Bulk Verifikasi

6. Seleksi & Pengumuman
   ├─> Simulasi Seleksi
   ├─> Preview Hasil
   ├─> Approval Kepsek
   ├─> Jadwal Publish
   └─> Publish Pengumuman

7. Laporan
   ├─> Statistik Demografi
   ├─> Laporan Pembayaran
   ├─> Laporan Konversi
   └─> Export PDF/Excel

8. Master Data Alumni
   ├─> List Alumni
   ├─> Import CSV/Excel
   ├─> Search Manual
   └─> Sync dari Unit Lain (Multi-Unit)
```

### Super Admin Flow
```
1. Dashboard Platform
   ├─> Total Tenants
   ├─> Total Registrations
   ├─> Revenue
   └─> System Health

2. Manajemen Tenant
   ├─> List Sekolah
   ├─> Create Tenant
   ├─> Assign Subscription
   └─> Impersonate Login

3. Subscription & Billing
   ├─> List Subscriptions
   ├─> Manage Plans
   └─> Invoice History
```

---

## 10.3 Test Strategy

### Unit Testing
- **Coverage Target:** 80% minimum untuk core business logic
- **Framework:** Vitest (compatible dengan SvelteKit)
- **Scope:** Utility functions, data validation, helper functions
- **Automation:** Run on every PR merge

### Integration Testing
- **Focus:** API endpoints, database operations, authentication flow
- **Framework:** Playwright API Testing
- **Test Coverage:**
  - Authentication flow (register, login, refresh token)
  - CRUD operations untuk semua entities
  - Multi-tenant isolation
  - File upload & download
  - Payment gateway callbacks

### External Integration Testing
| Integration | Test Strategy | Environment |
|-------------|---------------|-------------|
| **Midtrans/Xendit** | Mock payment gateway untuk dev, sandbox untuk staging | Sandbox API key |
| **Google Maps** | Mock distance calculation service | Development only |
| **SendGrid/Mailgun** | Verify email delivery di staging, skip di test unit | Sandbox |
| **WhatsApp API** | Test di staging production only | Production (paid) |

### E2E Testing
- **Framework:** Playwright
- **Critical Flows:**
  - Parent registration complete flow
  - Admin verification workflow
  - Selection & announcement process
  - Payment flow
- **Execution:** Sebelum setiap release major

### Performance Testing
- **Tools:** k6, Cloudflare Analytics
- **Scenarios:**
  - Load test: 1000 concurrent registrations
  - Stress test: Peak announcement traffic (5000+ simultaneous requests)
  - Response time: < 2s untuk API, < 3s untuk page load

### Security Testing
- **Tools:** OWASP ZAP, SonarQube SAST
- **Checks:**
  - SQL injection
  - XSS attacks
  - CSRF protection
  - Authentication bypass
  - Data leakage

---

## 11. Roadmap Development

### Phase 1: MVP (4-6 minggu)
- Setup project (SvelteKit + Cloudflare Workers)
- Database schema dan Prisma
- Authentication (JWT)
- Multi-tenant architecture
- Basic registration flow
- Admin dashboard basic

### Phase 2: Core Features (4-6 minggu)
- Semua jalur pendaftaran
- Upload dan verifikasi dokumen
- Seleksi dan ranking
- Pengumuman online
- Cetak kartu peserta

### Phase 3: Payment dan Notification (2-3 minggu)
- Payment gateway integration
- Email notification
- WhatsApp notification (opsional)

### Phase 4: Advanced Features (2-3 minggu)
- Laporan dan statistik lengkap
- Export PDF/Excel
- Super admin dashboard
- Subscription dan billing

### Phase 5: Polish dan Launch (2 minggu)
- Testing dan bug fixing
- Performance optimization
- Documentation
- Deployment production

---

## 12. Success Metrics

| Metric | Target |
|--------|--------|
| Onboarding Time | Kurang dari 30 menit per sekolah |
| Registration Completion Rate | Lebih dari 90% |
| System Uptime | 99.9% |
| Customer Satisfaction | Lebih dari 4.5/5 |
| Churn Rate | Kurang dari 10% per tahun |

---

## 13. Risks dan Mitigations

| Risk | Impact | Mitigation |
|------|--------|------------|
| Peak load saat pengumuman | High | Auto-scaling, queue system |
| Data breach | Critical | Encryption, audit log, backup |
| Payment failure | Medium | Retry mechanism, manual verification |
| Regulasi berubah | Medium | Flexible configuration |

---

## 14. User Stories dengan Acceptance Criteria

### 14.1 Sebagai Orang Tua/Wali

#### US-01: Registrasi Akun
**Story:** Sebagai orang tua, saya ingin membuat akun dengan mudah agar bisa mendaftarkan anak saya.

| Acceptance Criteria |
|---------------------|
| Dapat registrasi dengan **Email + Password** (metode utama, gratis) |
| Dapat registrasi dengan **Google OAuth** (alternatif, gratis) |
| Dapat registrasi dengan **nomor HP + OTP** (opsional, khusus paket Pro/Enterprise) |
| Validasi format email yang benar |
| Password minimal 8 karakter dengan kombinasi huruf dan angka |
| Menerima email konfirmasi setelah registrasi |
| Dapat login setelah verifikasi email |

> **Catatan Biaya OTP:** Registrasi via OTP SMS/WhatsApp memerlukan biaya per kirim (Rp 300-600). Untuk menjaga margin paket Starter (Rp 1.5jt/100 siswa), OTP hanya tersedia untuk paket Pro ke atas. Paket Starter menggunakan Email verification yang gratis.

#### US-02: Pendaftaran Online
**Story:** Sebagai orang tua, saya ingin mendaftarkan anak secara online agar tidak perlu datang ke sekolah.

| Acceptance Criteria |
|---------------------|
| Dapat memilih sekolah dari daftar sekolah aktif |
| Dapat memilih jalur pendaftaran yang tersedia |
| Form dapat disimpan sebagai draft |
| Upload foto dan dokumen (max 2MB, format JPG/PNG/PDF) |
| Dapat preview data sebelum submit |
| Menerima nomor pendaftaran setelah submit |
| Dapat mencetak bukti pendaftaran |

#### US-03: Tracking Status
**Story:** Sebagai orang tua, saya ingin melihat status pendaftaran secara real-time agar tidak perlu menghubungi sekolah.

| Acceptance Criteria |
|---------------------|
| Dashboard menampilkan status terkini (Draft/Submitted/Verified/Accepted/Rejected) |
| Timeline progress pendaftaran terlihat jelas |
| Notifikasi push/email saat status berubah |
| Dapat melihat catatan dari panitia jika ada revisi |

### 14.2 Sebagai Admin Sekolah

#### US-04: Setup Periode PPDB
**Story:** Sebagai admin sekolah, saya ingin mengkonfigurasi periode PPDB agar sesuai jadwal sekolah.

| Acceptance Criteria |
|---------------------|
| Dapat membuat periode baru dengan tanggal mulai dan selesai |
| Dapat mengaktifkan/menonaktifkan periode |
| Dapat mengatur jalur yang dibuka per periode |
| Dapat mengatur kuota per jalur |
| Preview tampilan halaman pendaftaran |

#### US-05: Verifikasi Dokumen
**Story:** Sebagai admin/panitia, saya ingin memverifikasi dokumen pendaftar dengan efisien.

| Acceptance Criteria |
|---------------------|
| List pendaftar dengan filter (status, jalur, tanggal) |
| Dapat melihat dokumen dalam viewer tanpa download |
| Dapat approve/reject dengan satu klik |
| Wajib isi catatan jika reject |
| Bulk action untuk verifikasi massal |
| Statistik verifikasi harian |

#### US-06: Pengumuman Hasil
**Story:** Sebagai admin sekolah, saya ingin mempublikasikan hasil seleksi dengan aman.

| Acceptance Criteria |
|---------------------|
| Dapat menjalankan simulasi seleksi sebelum publish |
| Preview daftar yang lolos per jalur |
| Approval kepala sekolah sebelum publish |
| Dapat set jadwal publish otomatis |
| Notifikasi massal ke pendaftar saat publish |
| Halaman pengumuman publik dengan pencarian |

### 14.3 Sebagai Super Admin

#### US-07: Manajemen Tenant
**Story:** Sebagai super admin, saya ingin mengelola sekolah-sekolah yang terdaftar di platform.

| Acceptance Criteria |
|---------------------|
| CRUD data sekolah (nama, alamat, jenjang, kontak) |
| Assign paket subscription ke sekolah |
| Melihat usage dan statistik per sekolah |
| Dapat login sebagai admin sekolah untuk troubleshooting |
| Suspend/aktifkan tenant |

---

## 15. MoSCoW Prioritization

### Must Have (MVP Phase 1)
| Fitur | Alasan |
|-------|--------|
| Registrasi & Login | Core flow, tanpa ini tidak bisa mulai |
| Form Pendaftaran | Fitur utama produk |
| Upload Dokumen | Wajib untuk verifikasi |
| Dashboard Admin Basic | Admin perlu kelola pendaftar |
| Multi-tenant | Arsitektur dasar SaaS |

### Should Have (Phase 2)
| Fitur | Alasan |
|-------|--------|
| Semua Jalur Pendaftaran | Comply dengan regulasi |
| Verifikasi Dokumen | Workflow lengkap |
| Ranking & Seleksi | Proses inti PPDB |
| Pengumuman Online | Output utama PPDB |
| Cetak Kartu Peserta | Bukti fisik diperlukan |

### Could Have (Phase 3-4)
| Fitur | Alasan |
|-------|--------|
| Payment Gateway | Nice to have, bisa manual dulu |
| Notifikasi WhatsApp | Enhancement, email cukup |
| Laporan Advanced | Bisa export manual dulu |
| Custom Domain | Fitur premium |

### Won't Have (Post-Launch)
| Fitur | Alasan |
|-------|--------|
| Mobile App Native | PWA cukup untuk MVP |
| Integrasi Dapodik | Kompleks, butuh approval |
| AI Document Verification | Future enhancement |
| Multi-language | Fokus Indonesia dulu |

---

## 16. Assumptions & Dependencies

### 16.1 Assumptions

| ID | Assumption | Risk jika Salah | Validation Plan |
|----|------------|-----------------|-----------------|
| A1 | Sekolah punya internet stabil | High - tidak bisa akses | Survey 50 sekolah target |
| A2 | Admin sekolah bisa pakai komputer dasar | Medium - butuh training | User testing dengan persona |
| A3 | Orang tua punya smartphone | Medium - butuh alternatif | Data BPS penetrasi smartphone |
| A4 | Sekolah mau bayar subscription | Critical - no revenue | Pilot dengan 5 sekolah gratis |
| A5 | Regulasi PPDB tidak berubah drastis | Medium - perlu adaptasi | Monitor Permendikbud |

### 16.2 Dependencies

| ID | Dependency | Owner | Status | Impact jika Delay |
|----|------------|-------|--------|-------------------|
| D1 | Payment gateway approval (Midtrans/Xendit) | Bisnis | Pending | Phase 3 tertunda |
| D2 | SSL Certificate | DevOps | Ready | Tidak bisa launch |
| D3 | Cloud hosting setup (AWS/GCP) | DevOps | In Progress | Development terhambat |
| D4 | WhatsApp Business API | Bisnis | Not Started | Notifikasi WA tidak jalan |
| D5 | Domain ppdb-saas.id | Bisnis | Ready | Branding delay |

### 16.3 External Integrations

| System | Purpose | Priority | Complexity |
|--------|---------|----------|------------|
| Google Maps API | Kalkulasi jarak zonasi | High | Medium |
| SendGrid/Mailgun | Email transactional | High | Low |
| Midtrans/Xendit | Payment processing | Medium | Medium |
| WhatsApp Business | Notifikasi | Low | High |
| Dapodik | Sync data sekolah | Future | Very High |

---

## 17. Compliance & Legal

### 17.1 UU Pelindungan Data Pribadi (UU PDP) Indonesia

| Aspek | Requirement | Implementasi |
|-------|-------------|--------------|
| **Consent** | Persetujuan eksplisit untuk pengumpulan data | Checkbox consent saat registrasi dengan link privacy policy |
| **Data Anak** | Consent orang tua/wali untuk data anak di bawah 18 tahun | Orang tua yang registrasi, bukan anak langsung |
| **Purpose Limitation** | Data hanya untuk tujuan PPDB | Tidak dijual ke pihak ketiga, audit log akses |
| **Data Minimization** | Hanya kumpulkan data yang diperlukan | Review form fields, hapus yang tidak perlu |
| **Retention** | Batas waktu penyimpanan | Data pendaftar disimpan 5 tahun, lalu anonymize |
| **Right to Access** | User bisa minta salinan data | Fitur export data pribadi |
| **Right to Delete** | User bisa minta hapus data | Fitur delete account (dengan batasan) |
| **Data Breach** | Notifikasi dalam 72 jam | Incident response plan, monitoring |

### 17.2 Data Sensitif yang Dikumpulkan

| Data | Kategori | Perlindungan |
|------|----------|--------------|
| NIK (KTP/KK) | PII Critical | Encrypted at rest, masked di UI |
| Alamat rumah | PII | Encrypted, akses terbatas |
| Data ekonomi (KIP) | Sensitif | Encrypted, audit log |
| Foto siswa | Biometric | Encrypted, retention policy |
| Nilai rapor | Pendidikan | Akses sesuai role |

### 17.3 Security Measures

| Layer | Measure |
|-------|---------|
| **Transport** | TLS 1.3, HSTS |
| **Authentication** | JWT + Refresh token, MFA untuk admin |
| **Authorization** | RBAC dengan permission matrix |
| **Data at Rest** | AES-256 encryption |
| **Audit** | Log semua akses data sensitif |
| **Backup** | Daily backup, encrypted, 30 days retention |

### 17.4 Terms of Service Key Points

- Platform sebagai processor, sekolah sebagai controller
- SLA 99.9% uptime
- Liability limitation
- Termination clause dengan data export
- Dispute resolution mechanism

---

**Document Owner:** Product Team
**Last Updated:** Desember 2025
**Next Review:** Setelah Phase 1 MVP
